<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFs">
    <link rel="stylesheet" href="../style/sweetalert2.css">
    <script src="../js/jquery.js"></script>
    <script src="../js/sweetalert2.js"></script>
    <script src="../js/javaAnimal.js"></script>
    <link rel="stylesheet" href="../style/cadastro_animal.css">
    <meta charset="UTF-8">
    <title>Cadastro Animal</title>
</head>

<body>

    <div class="container-animal mt-5 col-md-12">
        <div class="card col-md-12" style="width: 100%; height: 88vh; overflow-y: scroll;">

            <div class="cadastro-form">
                <button type="button" class="btn btn-danger btn-close" onclick="chat()"></button>

                <form method="post" id="register" class="form-vertical" enctype="multipart/form-data">
                    
                    <h3 style="text-align: center;" class="card-title">Cadastro de animal</h3>
                    <input type="hidden" name="acao" value="insert">

                    <div class="card-body">

                         
                    <div class="img">
                        <div class="file-upload">
                            <button class="file-upload-btn" type="button"
                                onclick="$('.file-upload-input').trigger( 'click' )">Add Image</button>

                            <div class="image-upload-wrap">
                                <input class="file-upload-input" type='file' onchange="readURL(this);"
                                    accept="image/*" name="imagem">
                                <div class="drag-text">
                                    <h3>Foto do animal</h3>
                                </div>
                            </div>
                            <div class="file-upload-content">
                                <img class="file-upload-image" src="#" alt="your image" />
                                <div class="image-title-wrap">
                                    <button type="button" onclick="removeUpload()" class="remove-image">Remove <span
                                            class="image-title">Uploaded Image</span></button>
                                </div>
                            </div>
                        </div>
                    </div>

                        <div class="form-group">

                            <label class="col-md-4 control-label" for="nome">Nome do animal: </label>
                            <div class="col-md-12">
                                <input id="nome" name="nome" placeholder="" class="form-control input-md" required=""
                                    type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="idade" class="col-md-4 control-label">Idade:</label>
                            <div class="col-md-12">
                                <input class="form-control" type="number" name="idade" id="P1103_QTDE" value="1"
                                    size="30" maxlength="4000" min="1" max="100">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="raca" class="col-md-4 control-label">Raça:</label>
                            <div class="col-md-12">
                                <select name="raca" class="form-control">
                                    <option value="definida">Raça Definida</option>
                                    <option value="srd">Sem Raça Definida</option>
                                </select>
                            </div>

                        </div>

                        <div class="form-group">

                            <label class="col-md-4 control-label" for="cor">Cor do animal: </label>
                            <div class="col-md-12">
                                <input id="cor" name="cor" placeholder="" class="form-control input-md" required=""
                                    type="text">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pelagem" class="col-md-4 control-label">Pelagem:</label>
                            <div class="col-md-12">
                                <select name="pelagem" class="form-control">
                                    <option value="curto">Curto</option>
                                    <option value="médio">Médio</option>
                                    <option value="longo">Longo</option>
                                </select>
                            </div>

                        </div>

                        <div class="form-group">

                            <label for="sexo" class="col-md-4 control-label">Sexo:</label>

                            <div class="col-md-12"><select name="sexo" class="form-control">
                                    <option value="macho">Macho</option>
                                    <option value="fêmea">Fêmea</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="porte" class="col-md-4 control-label">Porte:</label>
                            <div class="col-md-12">
                                <select name="porte" class="form-control">
                                    <option value="pequeno">Pequeno</option>
                                    <option value="médio">Médio</option>
                                    <option value="grande">Grande</option>
                                </select>
                            </div>

                        </div>
                        <div class="form-group">
                            <label for="especie" class="col-md-4 control-label">Pelagem:</label>
                            <div class="col-md-12">
                                <select name="especie" class="form-control">
                                    <option value="cachorro">Cachorro</option>
                                    <option value="gato">Gato</option>
                                </select>
                            </div>

                        </div>

                        <div class="form-group">
                            <label for="validationTextarea" class="col-md-4 control-label">Descrição do Animal:</label>

                            <div class="form-group text-are col-md-12">
                                <div class="form-group col-md-8 ">
                                    <textarea name="descricao" class="form-control" rows="4" id="validationTextarea"
                                        required></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-md-2 control-label" for="Cadastrar"></label>
                            <div class="col-md-8">
                                <button id="Cadastrar" name="Cadastrar" class="btn btn-success">Cadastrar</button>
                                <button id="Cancelar" name="Cancelar" class="btn btn-danger"
                                    type="Reset">Cancelar</button>
                            </div>
                        </div>
                </form>


                <script>
                    $('#register').on('submit', function (e) {
                        e.preventDefault();
                        $.ajax({
                            type: 'post',
                            url: '../core/animal_repositorio.php',
                            xhrFields: {
                                withCredentials: true
                            },
                            crossDomain: true,
                            data: $('#register').serialize(),
                            success: function (data) {
                                Swal.fire({
                                    title: 'Cadastro confirmado',
                                    text: 'O animal foi cadastrado com sucesso',
                                    icon: 'success',
                                    confirmButtonText: 'OK'
                                })
                            },
                            error: function (error) {
                                console.log(error);
                                Swal.fire({
                                    title: 'algo não esta correto!',
                                    text: error.statusText,
                                    icon: 'error',
                                    confirmButtonText: 'Tentar novamente'
                                })
                            }
                        });
                    });

                    function fecharAba() {
                        $(".card").hide();
                    }
                </script>

            </div>
        </div>

    </div>
</body>